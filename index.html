<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Light-weight pipelining tool -- 
    simplifying complex data analysis scripts.">
<title>Sewage: A Light-Weight Data Pipelining Tool â€¢ sewage</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Sewage: A Light-Weight Data Pipelining Tool">
<meta property="og:description" content="Light-weight pipelining tool -- 
    simplifying complex data analysis scripts.">
<meta property="og:image" content="https://mwhalen18.github.io/sewage/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">sewage</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mwhalen18/sewage/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="sewage-">sewage 
<a class="anchor" aria-label="anchor" href="#sewage-"></a>
</h1>
</div>
<!-- badges: start -->

<p>The goal of sewage is to provide a light-weight pipelining interface for data analyses. Rather than construct long scripts with intermiediate datasets or processes, you can construct a single pipeline and run it in a single call.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of sewage from Github:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"mwhalen18/sewage"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Below is an example of how to construct a simple pipeline.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mwhalen18/sewage" class="external-link">sewage</a></span><span class="op">)</span></span></code></pre></div>
<p>You can use any function as a component in the pipeline, including custom functions you define or import from an external source.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">subset_data</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">cyl</span> <span class="op">==</span> <span class="fl">6</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">summarizer</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">x</span><span class="op">[[</span><span class="st">'disp'</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Currently, there are 3 components ready for use: <code>Nodes</code>, <code>Splitters</code>, and <code>Joiners</code>. Nodes take one object as input and return exactly one object. Splitters take in exactly one object and may return any number of outputs greater than 1. <code>Joiners</code> take in multiple objects and return 1 object according to the method you pass to the <code>Joiner</code> (More on these components below).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pipeline</span> <span class="op">=</span> <span class="fu"><a href="reference/Pipeline.html">Pipeline</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">pipeline</span> <span class="op">=</span> <span class="va">pipeline</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_node.html">add_node</a></span><span class="op">(</span>component <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="va"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span>, name <span class="op">=</span> <span class="st">"Reader"</span>, input <span class="op">=</span> <span class="st">"file"</span>, show_col_types <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_node.html">add_node</a></span><span class="op">(</span>component <span class="op">=</span> <span class="fu"><a href="reference/Splitter.html">Splitter</a></span><span class="op">(</span><span class="op">)</span>, name <span class="op">=</span> <span class="st">"Splitter"</span>, input <span class="op">=</span> <span class="st">"Reader"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_node.html">add_node</a></span><span class="op">(</span>component <span class="op">=</span> <span class="va">subset_data</span>, name <span class="op">=</span> <span class="st">"Subsetter"</span>, input <span class="op">=</span> <span class="st">"Splitter.output_2"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_node.html">add_node</a></span><span class="op">(</span>component <span class="op">=</span> <span class="va">summarizer</span>, name <span class="op">=</span> <span class="st">"Summarizer"</span>, input <span class="op">=</span> <span class="st">"Splitter.output_1"</span><span class="op">)</span></span></code></pre></div>
<p>Note outputs of a Splitter are accessible by specifying the name of the splitter component (In this case <code>Splitter</code>) suffixed with the outgoing edge in the format <code>{name}.output_{i}</code>.</p>
<p>The first node in your pipeline should specify the argument that will be passed into the pipeline when we execute it (More on this below).</p>
<p>We can easily visualize our pipeline using the <code>draw</code> method.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/draw.sewage_pipeline.html">draw</a></span><span class="op">(</span><span class="va">pipeline</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/pipeline-vis.png"></p>
<p>Here we execute the pipeline with the <code>run</code> command. It is important to note that the argument you pass to <code>run</code> should match the <code>input</code> argument of your first node in your pipeline. In this case we are passing a <code>file</code> argument in <code>run</code> and similarly our first node is set to receive a <code>file</code> argument as input.</p>
<p>You may choose any argument name you like, as long as these two arguments match!</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">=</span> <span class="fu"><a href="reference/run.html">run</a></span><span class="op">(</span><span class="va">pipeline</span>, file <span class="op">=</span> <span class="st">'temp.csv'</span><span class="op">)</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; â€¢ `` -&gt; `...1`</span></span></code></pre></div>
<p>We can now access the results of our terminating nodes. A terminating node is any node that is not specified as input. By default when the pipeline is run, each node will overwrite the output of its input node. Therefore any node that is not fed forward to a new node will return output. In the case of this pipeline, the <code>Subsetter</code> and <code>Summarizer</code> edges are our terminating nodes. Therefore, we can access their results in the <code>outputs</code> object of the pipeline</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/pull_output.html">pull_output</a></span><span class="op">(</span><span class="va">result</span>, <span class="st">"Subsetter"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 7 Ã— 12</span></span>
<span><span class="co">#&gt;   ...1           mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Mazda RX4     21       6  160    110  3.9   2.62  16.5     0     1     4     4</span></span>
<span><span class="co">#&gt; 2 Mazda RX4 Wâ€¦  21       6  160    110  3.9   2.88  17.0     0     1     4     4</span></span>
<span><span class="co">#&gt; 3 Hornet 4 Drâ€¦  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1</span></span>
<span><span class="co">#&gt; 4 Valiant       18.1     6  225    105  2.76  3.46  20.2     1     0     3     1</span></span>
<span><span class="co">#&gt; 5 Merc 280      19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4</span></span>
<span><span class="co">#&gt; 6 Merc 280C     17.8     6  168.   123  3.92  3.44  18.9     1     0     4     4</span></span>
<span><span class="co">#&gt; 7 Ferrari Dino  19.7     6  145    175  3.62  2.77  15.5     0     1     5     6</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/pull_output.html">pull_output</a></span><span class="op">(</span><span class="va">result</span>, <span class="st">"Summarizer"</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;    71.1   120.8   196.3   230.7   326.0   472.0</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="multiple-entrypoints">Multiple Entrypoints<a class="anchor" aria-label="anchor" href="#multiple-entrypoints"></a>
</h2>
<p>It is also possible to pass in multiple entrypoints by specifying the inputs in your arguments. This allows you to process multiple documents and bring them together using a <code>Joiner</code> later in your pipeline.</p>
<p>The <code>Joiner</code> will take multiple inputs and convert them to a single output in the pipeline according to the function specified. This component works nicely for <code>dplyr</code>-like joins, but is not restricted to these methods.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">pipeline</span> <span class="op">=</span> <span class="fu"><a href="reference/Pipeline.html">Pipeline</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">pipeline</span> <span class="op">=</span> <span class="va">pipeline</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_node.html">add_node</a></span><span class="op">(</span><span class="va">read.csv</span>, name <span class="op">=</span> <span class="st">"Reader"</span>, input <span class="op">=</span> <span class="st">"file"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_node.html">add_node</a></span><span class="op">(</span><span class="va">subset_data</span>, name <span class="op">=</span> <span class="st">"Subsetter"</span>, input <span class="op">=</span> <span class="st">"data"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_node.html">add_node</a></span><span class="op">(</span><span class="fu"><a href="reference/Joiner.html">Joiner</a></span><span class="op">(</span>method <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">)</span>, name <span class="op">=</span> <span class="st">"Joiner"</span>, input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Reader"</span>, <span class="st">"Subsetter"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">output</span> <span class="op">=</span> <span class="fu"><a href="reference/run.html">run</a></span><span class="op">(</span><span class="va">pipeline</span>, file <span class="op">=</span> <span class="st">"temp.csv"</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/draw.sewage_pipeline.html">draw</a></span><span class="op">(</span><span class="va">pipeline</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/multi-pipeline-viz.png" style="width:50.0%"></p>
<p>Using these three components (<code>Nodes</code>, <code>Splitters</code> and <code>Joiners</code>) you can construct complex data pipelines and run them in a single call.</p>
</div>
</div>
<div class="section level1">
<h1 id="why-sewage">Why sewage?<a class="anchor" aria-label="anchor" href="#why-sewage"></a>
</h1>
<p>What is the point of <a href="https://github.com/mwhalen18/sewage" class="external-link">sewage</a> over more robust orchestrations tools like <a href="https://docs.ropensci.org/targets/" class="external-link">targets</a> or Airflow? First, <code>sewage</code> is not an orchestration tool. Its primary purpose is to help modularize and organize complex data analysis scripts. If you have ever opened a single script to find multiple functions, intermediate datasets, visualizations, tests, models, and outputs, then sewage may be a starting place to aid in organization.</p>
<p>If you feel comfortable using packages like <a href="https://docs.ropensci.org/targets/" class="external-link">targets</a> or Airflow you probably should.</p>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/mwhalen18/sewage/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mwhalen18/sewage/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing sewage</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Matthew Whalen <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/mwhalen18/sewage/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/mwhalen18/sewage/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Matthew Whalen.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
